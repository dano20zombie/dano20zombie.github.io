<!DOCTYPE html>
<html lang="de">
<head>
  
    <title>CppOnionBridge: Innovation in Anonymous Internet Access :: dano20zombies Blog</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Erkunden Sie CppOnionBridge, die ultimative Lösung für das anonyme Surfen im Internet. Dieser Beitrag zeigt, wie das Projekt einen sicheren und geschützten Zugang zu Onion-Sites und APIs über das Tor-Netzwerk bietet und die Bedeutung von Datenschutz und Online-Sicherheit in einem digitalen Zeitalter betont. Ideal für Windows-Benutzer, die ihr Online-Erlebnis verbessern möchten, während sie ihre digitale Identität schützen." />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://dano20zombie.github.io/de/posts/cpponionbridge/" />






  
  
  
  
  
  <link rel="stylesheet" href="https://dano20zombie.github.io/styles.css">







  <link rel="shortcut icon" href="https://dano20zombie.github.io/favicon.ico">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="de" />
<meta property="og:type" content="article" />
<meta property="og:title" content="CppOnionBridge: Innovation in Anonymous Internet Access">
<meta property="og:description" content="Erkunden Sie CppOnionBridge, die ultimative Lösung für das anonyme Surfen im Internet. Dieser Beitrag zeigt, wie das Projekt einen sicheren und geschützten Zugang zu Onion-Sites und APIs über das Tor-Netzwerk bietet und die Bedeutung von Datenschutz und Online-Sicherheit in einem digitalen Zeitalter betont. Ideal für Windows-Benutzer, die ihr Online-Erlebnis verbessern möchten, während sie ihre digitale Identität schützen." />
<meta property="og:url" content="https://dano20zombie.github.io/de/posts/cpponionbridge/" />
<meta property="og:site_name" content="dano20zombies Blog" />

  
    <meta property="og:image" content="https://dano20zombie.github.io/favicon.ico">
  

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">

  <meta property="article:section" content="Sicherheit" />

  <meta property="article:section" content="Technologie" />


  <meta property="article:published_time" content="2024-02-17 00:00:00 &#43;0000 UTC" />












</head>
<body class="red">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/de">
  <div class="logo">
    dano20zombies Blog
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/de/showcase">Schaufenster</a></li>
        
      
        
          <li><a href="/de/about">Über mich</a></li>
        
      
      
        <hr />
        
          <li>
            <a href="https://dano20zombie.github.io/en/">English</a>
          </li>
        
          <li>
            <a href="https://dano20zombie.github.io/zh/">中文</a>
          </li>
        
          <li>
            <a href="https://dano20zombie.github.io/es/">Español</a>
          </li>
        
          <li>
            <a href="https://dano20zombie.github.io/fr/">Français</a>
          </li>
        
          <li>
            <a href="https://dano20zombie.github.io/it/">Italiano</a>
          </li>
        
          <li>
            <a href="https://dano20zombie.github.io/ar/">العربية</a>
          </li>
        
          <li>
            <a href="https://dano20zombie.github.io/de/">Deutsch</a>
          </li>
        
          <li>
            <a href="https://dano20zombie.github.io/ru/">Русский</a>
          </li>
        
      
    </ul>
  </li>
</ul>

    
    
      <ul class="menu menu--desktop menu--language-selector">
  <li class="menu__trigger">Deutsch&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        <li><a href="https://dano20zombie.github.io/en/">English</a></li>
      
        <li><a href="https://dano20zombie.github.io/zh/">中文</a></li>
      
        <li><a href="https://dano20zombie.github.io/es/">Español</a></li>
      
        <li><a href="https://dano20zombie.github.io/fr/">Français</a></li>
      
        <li><a href="https://dano20zombie.github.io/it/">Italiano</a></li>
      
        <li><a href="https://dano20zombie.github.io/ar/">العربية</a></li>
      
        <li><a href="https://dano20zombie.github.io/de/">Deutsch</a></li>
      
        <li><a href="https://dano20zombie.github.io/ru/">Русский</a></li>
      
    </ul>
  </li>
</ul>

    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/de/showcase" >Schaufenster</a></li>
        
      
        
          <li><a href="/de/about" >Über mich</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://dano20zombie.github.io/de/posts/cpponionbridge/">CppOnionBridge: Innovation in Anonymous Internet Access</a>
  </h1>
  <div class="post-meta"><time class="post-date">2024-02-17</time><span class="post-reading-time">8 min read (1573 words)</span></div>

  
    <span class="post-tags">
      
      #<a href="https://dano20zombie.github.io/de/tags/cpponionbridge/">CppOnionBridge</a>&nbsp;
      
      #<a href="https://dano20zombie.github.io/de/tags/tor-netzwerk/">Tor Netzwerk</a>&nbsp;
      
      #<a href="https://dano20zombie.github.io/de/tags/online-anonymit%C3%A4t/">Online Anonymität</a>&nbsp;
      
      #<a href="https://dano20zombie.github.io/de/tags/cybersicherheit/">Cybersicherheit</a>&nbsp;
      
      #<a href="https://dano20zombie.github.io/de/tags/c&#43;&#43;/">C&#43;&#43;</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <h2 id="haftungsausschluss">Haftungsausschluss<a href="#haftungsausschluss" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Dieser Beitrag und das CppOnionBridge-Projekt zielen darauf ab, die Online-Privatsphäre und -Sicherheit zu fördern. Die Verwendung von Tools zum anonymen Surfen im Internet sollte immer in Übereinstimmung mit den örtlichen Gesetzen und Vorschriften erfolgen. Wir möchten darauf hinweisen, dass die Verantwortung für die Verwendung solcher Tools beim Endbenutzer liegt. Dieser Inhalt wird &ldquo;wie er ist&rdquo; bereitgestellt, ohne jegliche Gewähr für seine Richtigkeit oder Aktualität.</p>
<h2 id="einführung">Einführung<a href="#einführung" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Im aktuellen Kontext, in dem die Online-Privatsphäre ständig bedroht ist, präsentiert sich <strong>CppOnionBridge</strong> als avantgardistische Lösung, um anonymen und sicheren Zugang zum Internet zu gewährleisten. Dieses Projekt, das mit Fokus auf Windows-Umgebungen entwickelt wurde, ermöglicht eine sichere Navigation zu Onion-Sites und APIs durch das Tor-Netzwerk unter Verwendung des SOCKS5-Protokolls.</p>
<h2 id="vision">Vision<a href="#vision" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Die Vision hinter <strong>CppOnionBridge</strong> ist klar: ein Tool bereitzustellen, das nicht nur die Online-Identität der Benutzer schützt, sondern auch die Leistung des Tor-Netzwerks für Entwickler und Endbenutzer mit minimalem technischen Aufwand zugänglich macht. Dieses Projekt kapselt die Komplexität von SSL/TLS-Verbindungen und HTTP(S)-Anfragen durch Tor ein, was es ermöglicht, sich auf die Anwendungs-Funktionalität zu konzentrieren.</p>
<h2 id="funktionen-und-vorteile">Funktionen und Vorteile<a href="#funktionen-und-vorteile" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ul>
<li><strong>Einfache Integration</strong>: Entwickelt, um leicht in C++-Anwendungen integriert zu werden, senkt <strong>CppOnionBridge</strong> die Einstiegshürde für die Entwicklung sicherer Anwendungen.</li>
<li><strong>Minimale Abhängigkeiten</strong>: Mit nur Abhängigkeiten von Boost für Netzwerk- und Systemoperationen und OpenSSL für verschlüsselte Verbindungen bleibt es leichtgewichtig und unabhängig von der Entwicklungsumgebung.</li>
<li><strong>SOCKS5-Kompatibilität</strong>: Gewährleistet eine reibungslose und sichere Interaktion mit dem Tor-Netzwerk und ebnet den Weg für eine Vielzahl von Anwendungen, die Anonymität und Sicherheit erfordern.</li>
</ul>
<h2 id="was-ist-socks5">Was ist SOCKS5<a href="#was-ist-socks5" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>SOCKS ist ein Internetprotokoll, das Netzwerkpakete zwischen einem Client und einem Server über einen Proxyserver austauscht. SOCKS5 bietet optional Authentifizierung, sodass nur autorisierte Benutzer auf einen Server zugreifen können.</p>
<h2 id="warum-socks5">Warum SOCKS5<a href="#warum-socks5" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Das SOCKS5-Protokoll wurde aufgrund seiner Flexibilität und Sicherheit ausgewählt. Seine Client-Server-Architektur ermöglicht die Einbettung von HTTP(S)-Anfragen und SSL/TLS-Verbindungen durch Tor, was eine sichere und anonyme Interaktion mit dem Netzwerk gewährleistet. Darüber hinaus macht seine Kompatibilität mit einer Vielzahl von Anwendungen es zur idealen Wahl, um Anonymität und Online-Sicherheit zu gewährleisten. (<a href="https://en.wikipedia.org/wiki/SOCKS">Wikipedia</a>)
Der SOCKS5-Server fungiert als Proxy zwischen Ihnen und dem endgültigen Host, der Pakete von Ihrem Computer zur anderen Seite der Verbindung sendet und umgekehrt.
TOR stellt uns bereits eine SOCKS5-Schnittstelle zur Verfügung, die auf dem Standard-Lokalport 9050 basiert, aber in diesem Beispiel werden wir Port 9150 verwenden.</p>
<h2 id="wie-es-funktioniert">Wie es funktioniert<a href="#wie-es-funktioniert" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>CppOnionBridge basiert auf zwei externen Bibliotheken: Boost und OpenSSL, also fangen wir an, sie in unser Projekt einzuschließen:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;boost/asio.hpp&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;boost/beast.hpp&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;boost/beast/http.hpp&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;boost/beast/ssl.hpp&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;boost/beast/version.hpp&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;boost/asio/connect.hpp&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;boost/asio/ip/tcp.hpp&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;boost/asio/ssl/error.hpp&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;boost/asio/ssl/stream.hpp&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#pragma comment(lib, &#34;libcrypto64MD.lib&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#pragma comment(lib, &#34;libssl64MD.lib&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;Windows.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Definizioni di namespace per semplificare il codice
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">namespace</span> beast <span style="color:#f92672">=</span> boost<span style="color:#f92672">::</span>beast;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> http <span style="color:#f92672">=</span> beast<span style="color:#f92672">::</span>http;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> ssl <span style="color:#f92672">=</span> boost<span style="color:#f92672">::</span>asio<span style="color:#f92672">::</span>ssl;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> asio <span style="color:#f92672">=</span> boost<span style="color:#f92672">::</span>asio;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> error <span style="color:#f92672">=</span> boost<span style="color:#f92672">::</span>asio<span style="color:#f92672">::</span>error;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> tcp <span style="color:#f92672">=</span> asio<span style="color:#f92672">::</span>ip<span style="color:#f92672">::</span>tcp;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">static</span> std<span style="color:#f92672">::</span>string <span style="color:#66d9ef">const</span> host <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bible4u2lvhacg4b3to2e2veqpwmrc2c3tjf2wuuqiz332vlwmr4xbad.onion&#34;</span>; <span style="color:#75715e">// Bible4u
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">static</span> std<span style="color:#f92672">::</span>string <span style="color:#66d9ef">const</span> api <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/en/about&#34;</span>; <span style="color:#75715e">// About Page
</span></span></span></code></pre></div><p>Nachdem wir das getan haben, müssen wir als ersten tatsächlichen Schritt einen Socket erstellen und uns mit der localhost-Adresse verbinden, mit unserem spezifizierten Port (127.0.0.1:9150):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>asio<span style="color:#f92672">::</span>io_context io_context;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tcp<span style="color:#f92672">::</span>socket socket(io_context);
</span></span><span style="display:flex;"><span>tcp<span style="color:#f92672">::</span>resolver resolver(io_context);
</span></span><span style="display:flex;"><span>ssl<span style="color:#f92672">::</span>stream<span style="color:#f92672">&lt;</span>tcp<span style="color:#f92672">::</span>socket<span style="color:#f92672">&amp;&gt;*</span> ssl_stream <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">auto</span> endpoints <span style="color:#f92672">=</span> resolver.resolve(<span style="color:#e6db74">&#34;127.0.0.1&#34;</span>, <span style="color:#e6db74">&#34;9150&#34;</span>);
</span></span><span style="display:flex;"><span>asio<span style="color:#f92672">::</span>connect(socket, endpoints);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Connessione stabilita con successo.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
</span></span></code></pre></div><p>Nachdem Sie mit dem Socket verbunden sind, ist das erste, was zu tun ist, dem Server den initialen Gruß zu senden, um zu kommunizieren, dass wir das SOCKS5-Protokoll verwenden möchten.
Für detaillierte Informationen zu SOCKS5 können Sie sich an <a href="https://tools.ietf.org/html/rfc1928">IETF.ORG</a> wenden.
In erster Linie müssen Sie wissen, dass der initiale Gruß aus drei einzelnen Bytes in Folge besteht:</p>
<ol>
<li>
<ul>
<li>SOCKET-VERSION</li>
</ul>
</li>
<li>
<ul>
<li>ANZAHL DER AUTHENTIFIZIERUNGSMETHODEN</li>
</ul>
</li>
<li>
<ul>
<li>AUTHENTIFIZIERUNGSMETHODEN</li>
</ul>
</li>
</ol>
<p>Für das erste Byte haben wir 0x5, was die Socket-Version (SOCKS5) ist, als zweites Byte haben wir die Anzahl der vom Client unterstützten Authentifizierungsmethoden, wobei TOR in diesem Fall nur eine akzeptiert, nämlich 0x1, während das dritte Byte die gewählte Authentifizierungsmethode angibt, die in diesem Fall 0x0 sein wird, was bedeutet, dass keine Authentifizierung erfolgt.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Send the SOCKS5 greeting.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>socket.send(boost<span style="color:#f92672">::</span>asio<span style="color:#f92672">::</span>buffer(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\x05\x01\x00</span><span style="color:#e6db74">&#34;</span>, <span style="color:#ae81ff">3</span>));
</span></span></code></pre></div><p>An diesem Punkt müssen wir nur die Antwort lesen, die vom Proxy zurückgegeben wird, um zu erfahren, ob alles gut gelaufen ist oder nicht, indem wir das zweite Byte der Antwort lesen, das immer 0x0 sein sollte.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Receive the response to the SOCKS5 greeting.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">char</span> response[<span style="color:#ae81ff">2</span>];
</span></span><span style="display:flex;"><span>size_t length <span style="color:#f92672">=</span> socket.receive(boost<span style="color:#f92672">::</span>asio<span style="color:#f92672">::</span>buffer(response, <span style="color:#ae81ff">2</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Check the response to the SOCKS5 greeting.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">if</span> (length <span style="color:#f92672">!=</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">||</span> response[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;\x00&#39;</span>) <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span></code></pre></div><p>Wenn alles gut gelaufen ist, müssen wir dem Proxy-Server nur noch mitteilen, dass er sich mit einem spezifischen Host für uns verbinden soll, damit wir Anfragen senden und empfangen können.
Wir werden genauso vorgehen wie beim initialen Gruß, aber mit anderen Bytes. In diesem Fall haben wir vier anfängliche Bytes, den spezifizierten Host und ein oder zwei abschließende Bytes, um den Port anzugeben (HTTP/HTTPS - 80/443).</p>
<ol>
<li>
<ul>
<li>SOCKET-VERSION</li>
</ul>
</li>
<li>
<ul>
<li>BEFEHL</li>
</ul>
</li>
<li>
<ul>
<li>RESERVIERT</li>
</ul>
</li>
<li>
<ul>
<li>ADRESSTYP</li>
</ul>
</li>
<li>
<ul>
<li>ADRESSLÄNGE (NUR BEI DOMÄNENTYP)</li>
</ul>
</li>
<li>
<ul>
<li>ADRESSE</li>
</ul>
</li>
<li>
<ul>
<li>PORT</li>
</ul>
</li>
</ol>
<p>Als erstes Byte haben wir 0x5, was die Socket-Version (SOCK-5) ist, als zweites Byte haben wir den Befehl, den wir ausführen möchten, wobei es in diesem Fall 0x1 sein wird, was Verbindung bedeutet, als drittes Byte haben wir ein reserviertes Byte, das immer 0x0 sein muss, und als viertes Byte haben wir den Typ der Adresse, den wir angeben, wobei es in diesem Fall 0x3 sein wird, was eine Domänenadresse bedeutet, aber es könnte auch 0x1 sein, um sich mit einem IPv4 zu verbinden, oder 0x4, um sich mit einem IPv6 zu verbinden.
Nach diesen Bytes ist es notwendig, die Länge der Domäne, mit der wir uns verbinden möchten, am fünften Byte anzugeben, und sofort danach den Host über die Domäne anzugeben, und als letztes ein oder zwei Bytes haben wir den Port, zu dem wir uns verbinden möchten, wobei die häufigsten 80 (0x50) für HTTP und 443 (0x01 0xBB) für HTTPS sind.
Alle verfügbaren Befehle sind auf der <a href="https://tools.ietf.org/html/rfc1928">IETF.ORG</a>-Website sichtbar und dokumentiert.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>byte<span style="color:#f92672">*</span> request <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> byte[<span style="color:#ae81ff">256</span>];
</span></span><span style="display:flex;"><span>memset(request, <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">sizeof</span>(request));
</span></span><span style="display:flex;"><span>sprintf(request, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\x05\x01\x00\x03</span><span style="color:#e6db74">%c%s</span><span style="color:#ae81ff">\x01\xBB</span><span style="color:#e6db74">&#34;</span>, <span style="color:#66d9ef">static_cast</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">char</span><span style="color:#f92672">&gt;</span>(host.size()), host.c_str());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Send the request.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>socket.send(boost<span style="color:#f92672">::</span>asio<span style="color:#f92672">::</span>buffer(request, <span style="color:#ae81ff">7</span> <span style="color:#f92672">+</span> host.size()));
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">delete</span>[] request;
</span></span></code></pre></div><p>Zuletzt müssen wir wie immer die Serverantwort überprüfen, die in diesem Fall zehn Bytes lang sein sollte, von denen wir nur und ausschließlich das zweite Byte lesen werden, da es den Status unserer Anfrage zurückgibt.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Receive the response to the SOCKS5 connection request.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">char</span> buffer[<span style="color:#ae81ff">10</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> length_response <span style="color:#f92672">=</span> socket.receive(boost<span style="color:#f92672">::</span>asio<span style="color:#f92672">::</span>buffer(buffer, <span style="color:#ae81ff">10</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (length_response <span style="color:#f92672">!=</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">||</span> buffer[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;\x00&#39;</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 0x1: General failure of the socket
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// 0x2: Connection&#39;s rule not allowed
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// 0x3: Network not available
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// 0x4: Host not available
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// 0x5: Connection refused (SOCK5 not available)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// 0x6: Timeout
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// 0x7: Command not supported
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// 0x8: Address type not supported
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Einige Zwiebel-Domänen akzeptieren möglicherweise keine eingehenden Verbindungen über SOCK5. In diesem Fall, wenn Sie nicht der Domainbesitzer sind, kann nicht viel dagegen unternommen werden.
Jedoch können wir zu diesem Zeitpunkt mit dem Senden der tatsächlichen Anfrage fortfahren.
Wenn eine HTTPS-Anfrage gestellt wird, ist es erforderlich, die verschlüsselte Anfrage über einen SSL-Stream mit dem entsprechenden Handshake zu senden, da der Server sie sonst nicht interpretieren kann.
Andererseits sollte dies vermieden werden, wenn eine HTTP-Anfrage gestellt wird, bei der der Server eine klare Anfrage erwartet und daher nicht verschlüsselt wird.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Create the SSL stream for the new connection
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>ssl<span style="color:#f92672">::</span>context ctx(ssl<span style="color:#f92672">::</span>context<span style="color:#f92672">::</span>sslv23);
</span></span><span style="display:flex;"><span>ssl_stream <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ssl<span style="color:#f92672">::</span>stream<span style="color:#f92672">&lt;</span>tcp<span style="color:#f92672">::</span>socket<span style="color:#f92672">&amp;&gt;</span>(socket, ctx);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Perform the SSL/TLS handshake
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>ssl_stream<span style="color:#f92672">-&gt;</span>handshake(ssl<span style="color:#f92672">::</span>stream_base<span style="color:#f92672">::</span>client);
</span></span></code></pre></div><p>Nachdem ein SSL-Stream und sein Handshake durchgeführt wurden (WENN FÜR HTTPS ERFORDERLICH), fahren wir mit dem Senden der tatsächlichen Anfrage fort:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Prepare the HTTP request
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>std<span style="color:#f92672">::</span>string target <span style="color:#f92672">=</span> api;
</span></span><span style="display:flex;"><span>http<span style="color:#f92672">::</span>request<span style="color:#f92672">&lt;</span>http<span style="color:#f92672">::</span>string_body<span style="color:#f92672">&gt;</span> req(http<span style="color:#f92672">::</span>verb<span style="color:#f92672">::</span>get, target, <span style="color:#ae81ff">11</span>); <span style="color:#75715e">// Si specifica il metodo (GET/POST/PUT), l&#39;host e la versione dell&#39;HTTP
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>req.set(http<span style="color:#f92672">::</span>field<span style="color:#f92672">::</span>host, host); <span style="color:#75715e">// Si specifica l&#39;host
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>req.set(http<span style="color:#f92672">::</span>field<span style="color:#f92672">::</span>user_agent, <span style="color:#e6db74">&#34;Mozilla/5.0 (Windows NT 6.1; rv:31.0) Gecko/20100101 Firefox/31.0&#34;</span>); <span style="color:#75715e">// Si specifica l&#39;User-Agent (Browser)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>req.set(http<span style="color:#f92672">::</span>field<span style="color:#f92672">::</span>connection, <span style="color:#e6db74">&#34;keep-alive&#34;</span>); <span style="color:#75715e">// Si specifica la connessione come persistente (Opzionale)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Send the HTTP request over the SSL connection
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>http<span style="color:#f92672">::</span>write(<span style="color:#f92672">*</span>ssl_stream, req);
</span></span></code></pre></div><p>An diesem Punkt bleibt nur noch übrig, die Antwort auf unsere Anfrage endlich zu empfangen, zusammen mit dem Exit-Code, um das Ergebnis der Anfrage zu erfahren.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Receive the HTTP response
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>beast<span style="color:#f92672">::</span>flat_buffer buffer;
</span></span><span style="display:flex;"><span>http<span style="color:#f92672">::</span>response<span style="color:#f92672">&lt;</span>http<span style="color:#f92672">::</span>dynamic_body<span style="color:#f92672">&gt;</span> res;
</span></span><span style="display:flex;"><span>http<span style="color:#f92672">::</span>read(<span style="color:#f92672">*</span>ssl_stream, buffer, res); <span style="color:#75715e">//Otteniamo la risposta e salviamola in res
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>std<span style="color:#f92672">::</span>string req_response <span style="color:#f92672">=</span> beast<span style="color:#f92672">::</span>buffers_to_string(res.body().data()); <span style="color:#75715e">// Convertiamo la risposta in una stringa
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (res.result_int() <span style="color:#f92672">!=</span> <span style="color:#ae81ff">200</span>) <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>; <span style="color:#75715e">// 200 = HTTP_OK
</span></span></span></code></pre></div><p>Sobald wir mit unserer Anfrage fertig sind, müssen wir die Verbindung zum Proxy-Server schließen und den für den SSL-Stream allokierten Speicher freigeben:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>boost<span style="color:#f92672">::</span>system<span style="color:#f92672">::</span>error_code ec;
</span></span><span style="display:flex;"><span>ssl_stream<span style="color:#f92672">-&gt;</span>shutdown(ec); <span style="color:#75715e">// Spegniamo lo stream SSL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">delete</span> ssl_stream;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>socket.close(); <span style="color:#75715e">// Chiudiamo il socket
</span></span></span></code></pre></div><p>Und hier haben wir erfolgreich unsere Anfrage gestellt und die Antwort erhalten.</p>
<h2 id="installationsanleitung">Installationsanleitung<a href="#installationsanleitung" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Die Installation von <strong>CppOnionBridge</strong> erfordert einige vorbereitende Schritte, darunter die Konfiguration von Boost und OpenSSL in Ihrer Entwicklungsumgebung sowie eine aktive Instanz des Tor-Dienstes, der so konfiguriert ist, dass er über den Port 9150 arbeitet.</p>
<h3 id="installationschritte">Installationschritte:<a href="#installationschritte" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<ol>
<li>Stellen Sie sicher, dass Boost und OpenSSL im System installiert und ordnungsgemäß konfiguriert sind.</li>
<li>Überprüfen Sie, ob der Tor-Dienst aktiv ist und so eingestellt ist, dass er über den Port 9150 eine Verbindung herstellt.</li>
<li>Klonen Sie das GitHub-Repository von <strong>CppOnionBridge</strong> und fügen Sie es Ihrem Projekt hinzu.</li>
</ol>
<h2 id="beitrag-zum-projekt">Beitrag zum Projekt<a href="#beitrag-zum-projekt" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p><strong>CppOnionBridge</strong> ist ein Open-Source-Projekt, und die Beteiligung der Community ist entscheidend für seine kontinuierliche Entwicklung und Verbesserung. Wenn Sie daran interessiert sind, durch Code, Dokumentation oder Tests beizutragen, besuchen Sie das <a href="https://github.com/dano20zombie/CppOnionBridge">GitHub-Repository</a>.</p>
<h2 id="fazit">Fazit<a href="#fazit" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p><strong>CppOnionBridge</strong> stellt einen bedeutenden Schritt zur Demokratisierung des sicheren und anonymen Zugangs zum Internet dar. Mit seiner einfachen Integration, minimalen Abhängigkeiten und Kompatibilität mit dem Tor-Netzwerk eröffnet es neue Möglichkeiten für die Entwicklung von Anwendungen, die die Privatsphäre und Sicherheit der Benutzer respektieren.</p>
<p>Für weitere Details, Verweise und Installationsanleitungen verweisen Sie auf die <a href="https://github.com/dano20zombie/CppOnionBridge">vollständige Dokumentation</a>, die im GitHub-Repository verfügbar ist.</p>

      </div></div>

  
    
  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2024 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
